<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>meeting ìƒì„¸ í˜ì´ì§€</title>
</head>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script
	src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=k7j0ig44z6&submodules=geocoder"></script>
<link href="../css/styles_jw.css" rel="stylesheet" />
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="js/scripts.js"></script>
<style>
</style>
<body>
	<div th:insert="nav.html"></div>
	<section class="page-section" id="contact">
		<div class="row gx-4 gx-lg-5 justify-content-center" style="display: flex; flex-direction: column; align-content: center;">
			<div style="width: 800px; align: center; margin-left:auto; 
    margin-right:auto; padding-bottom: 80px">
					<div style="width:800px; display: flex; flex-direction: row; justify-content: space-around; padding-bottom: 30px" >
						<div style="width:180px; text-align: center; font-size:20px; font-style: italic; font-weight: bold;">ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ëª¨ì„ëª…</div>
						<div style="width:180px; text-align: center; font-size:20px; font-style: italic; font-weight: bold;">â”ì¥ì†Œ</div>
						<div style="width:180px; text-align: center; font-size:20px; font-style: italic; font-weight: bold;">ğŸ“†ë§Œë‚¨</div>
						<div style="width:180px; text-align: center; font-size:20px; font-style: italic; font-weight: bold;">ğŸ“†ì´ë³„</div>
					</div>
					<div style="width:800px; display: flex; flex-direction: row; justify-content: space-around;" >
						<div class="modal-name" style="width:180px; text-align: center;" th:text="${meeting.meetingName}"></div>
			
						<div class="modal-place" style="width:180px; height: 20px; text-align: center;" th:text="${meeting.meetingPlace}"></div>
					
						<div class="modal-date"  style="width:180px; text-align: center;" th:text="${meeting.meetingStartDate}"></div>
				
						<div class="modal-contents" style="width:180px; height: 20px; text-align: center; white-space: nowrap;overflow:hidden; text-overflow:ellipsis;" th:text="${meeting.meetingEndDate}"></div>
					</div>
				</div>
		</div>
		<div class="container px-4 px-lg-5"
			style="display: flex; flex-direction: column;">
			<div class="row gx-4 gx-lg-5 justify-content-center mb-5"
				style="display: flex; flex-grow: 1; flex-direction: row;">
				<div class="col-lg-6" style="flex-grow: 1;">
					<div id="map" style="width: 588px; height: 500px; margin-top: 40px;"></div>
					<div style="padding-bottom: 50px">
						<div style="width:588px; text-align: center; font-size:20px; font-style: italic; font-weight: bold; padding-top: 50px; padding-bottom: 30px">ğŸ“¦ëª©ì </div>
						<div class="modal-contents" style="width:588px; height: 100px; text-align: center;" th:text="${meeting.meetingDetail} "></div>
					</div>
					<div class="form-floating mb-3">
						<input class="form-control" id="address" disabled="disabled"
							placeholder="ê²€ìƒ‰í•  ì£¼ì†Œ" th:value="${meeting.meetingPlace}">
							<label for="address">ë„ì°©ì§€</label>
							<input type="hidden" id="lat" th:value="${meeting.meetingPlaceLat}" name="meetingPlaceLat">
							<input type="hidden" id="lng" th:value="${meeting.meetingPlaceLng}" name="meetingPlaceLng">
						<input class="form-control" id="departure" type="text"
							placeholder="ê²€ìƒ‰í•  ì£¼ì†Œ" value="" onchange="initGeocoder()">
						<input type="hidden" id="lat_de" value="" name="meetingPlaceLatDe">
						<input type="hidden" id="lng_de" value="" name="meetingPlaceLngDe">
					</div>
				</div>
				<div class="col-lg-6" style="flex-grow: 1;">
					<div id="result-route" class="col-lg-6" style="flex-grow: 1;  margin-top: 40px">
					</div>
				</div>
			</div>
			<div class="row gx-4 gx-lg-5 justify-content-center mb-5" style="display: flex; flex-grow: 1; flex-direction: row;">
				<div class="col-lg-6" style="flex-grow: 1;">

				</div>
			</div>
			<div th:if="${session.accountId != null}">
				<a id="button-participate" class="btn btn-primary btn-xl"  style="display: none" onclick="meetparticipate()">ì°¸ì—¬í•˜ê¸°</a>
				<a id="button-participate-cancel" class="btn btn-primary btn-xl" style="display: none" onclick="meetparticipatecancel()">ì·¨ì†Œí•˜ê¸°</a>
				<a id="button-delete" class="btn btn-primary btn-xl" style="display: none" th:href="@{/meetmeet/delete(meetingId=${meeting.meetingId})}">ëª¨ì„ì‚­ì œ</a>
				<br>
				<a id="button-modify" class="btn btn-primary btn-xl" style="display: none; opacity:0.8" th:href="@{/meetmeet/modify/{meetingId}(meetingId=${meeting.meetingId})}">ëª¨ì„ìˆ˜ì •</a>
			</div>
		</div>
	</section>
</body>
<script th:inline="javascript">

	/* backendì—ì„œ ë°›ì•„ì˜¨ ê¸°ì´ˆê°’ ì €ì¥ */
	/*<![CDATA[*/
	 let file_path = /*[[ ${meeting.filepath} ]]*/;
	 let master_id = /*[[ ${meeting.master_id} ]]*/;
	 let meeting_id = /*[[ ${meeting.meetingId} ]]*/;
	 let lat = /*[[ ${meeting.meetingPlaceLat} ]]*/;
	 let lng = /*[[ ${meeting.meetingPlaceLng} ]]*/;
	 /*]]*/
	 console.log(file_path);
	 console.log(lat);
	 console.log(lng);
	 
	/* html include*/
	includeHTML();
	function includeHTML() {
		var z, i, elmnt, file, xhttp;
		/* Loop through a collection of all HTML elements: */
		z = document.getElementsByTagName("*");
		for (i = 0; i < z.length; i++) {
			elmnt = z[i];
			/*search for elements with a certain atrribute:*/
			file = elmnt.getAttribute("w3-include-html");
			if (file) {
				/* Make an HTTP request using the attribute value as the file name: */
				xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4) {
						if (this.status == 200) {
							elmnt.innerHTML = this.responseText;
						}
						if (this.status == 404) {
							elmnt.innerHTML = "Page not found.";
						}
						/* Remove the attribute, and call this function once more: */
						elmnt.removeAttribute("w3-include-html");
						includeHTML();
					}
				}
				xhttp.open("GET", file, true);
				xhttp.send();
				/* Exit the function: */
				return;
			}
		}
	}

	/* ì§€ë„ê´€ë ¨ scriptë¬¸ */

	const odsay = 'uObgrqZOrswtls0XwGkV9w';

	var mapOptions = {
		center : new naver.maps.LatLng(lat, lng),
		zoom : 15,
		mapTypeControl : true
	};

	var map = new naver.maps.Map('map', mapOptions);

	var infoWindow = new naver.maps.InfoWindow({
		anchorSkew : true
	});

	map.setCursor('pointer');

	function searchCoordinateToAddress(latlng) {

		infoWindow.close();

		naver.maps.Service
				.reverseGeocode(
						{
							coords : latlng,
							orders : [ naver.maps.Service.OrderType.ADDR,
									naver.maps.Service.OrderType.ROAD_ADDR ]
									.join(',')
						},
						function(status, response) {
							if (status === naver.maps.Service.Status.ERROR) {
								if (!latlng) {
									return alert('ReverseGeocode Error, Please check latlng');
								}
								if (latlng.toString) {
									return alert('ReverseGeocode Error, latlng:'
											+ latlng.toString());
								}
								if (latlng.x && latlng.y) {
									return alert('ReverseGeocode Error, x:'
											+ latlng.x + ', y:' + latlng.y);
								}
								return alert('ReverseGeocode Error, Please check latlng');
							}

							var address = response.v2.address, htmlAddresses = [];

							if (address.jibunAddress !== '') {
								htmlAddresses.push('[ì§€ë²ˆ ì£¼ì†Œ] '
										+ address.jibunAddress);
							}

							if (address.roadAddress !== '') {
								htmlAddresses.push('[ë„ë¡œëª… ì£¼ì†Œ] '
										+ address.roadAddress);
							}
							// ì°ì€ê³³ ë§ˆì»¤ ì°ê¸°
							drawNaverMarker(latlng._lng, latlng._lat, true);
							document.getElementById("departure").value = htmlAddresses[0]
									.replace("[ì§€ë²ˆ ì£¼ì†Œ] ", "");
							document.getElementById("lat_de").value = latlng._lat;
							document.getElementById("lng_de").value = latlng._lng;
							
							dx =  document.getElementById("lng").value;
							dy =  document.getElementById("lat").value;
							ax = latlng._lng;
							ay = latlng._lat;
							searchPubTransPathAJAX();

							/* infoWindow
									.setContent([
											'<div id="" style="padding:10px;min-width:200px;line-height:150%;" value=true>',
											'<h4 style="margin-top:5px;">ê²€ìƒ‰ ì¢Œí‘œ</h4><br />',
											htmlAddresses.join('<br />'),
											'<c:if test="${not empty cookie.name.value}"><button onclick="setStartingPoint()">ì¶œë°œì§€</button></c:if><br />',
											'</div>' ].join('\n')); */

							/* infoWindow.open(map, latlng); */
						});
	}

	function searchAddressToCoordinate(arr) {
		if (arr == null) {
			arr = document.getElementById("departure").value
		}
		naver.maps.Service
				.geocode(
						{
							address : arr
						},
						function(status, response) {
							if (status === naver.maps.Service.Status.ERROR) {
								if (!address) {
									return alert('Geocode Error, Please check address');
								}
								return alert('Geocode Error, address:'
										+ address);
							}

							if (response.v2.meta.totalCount === 0) {
								return alert('No result.');
							}

							var htmlAddresses = [], item = response.v2.addresses[0], point = new naver.maps.Point(
									item.x, item.y);

							if (item.roadAddress) {
								htmlAddresses.push('[ë„ë¡œëª… ì£¼ì†Œ] '
										+ item.roadAddress);
							}

							if (item.jibunAddress) {
								htmlAddresses.push('[ì§€ë²ˆ ì£¼ì†Œ] '
										+ item.jibunAddress);
							}

							if (item.englishAddress) {
								htmlAddresses.push('[ì˜ë¬¸ëª… ì£¼ì†Œ] '
										+ item.englishAddress);
							}

							document.getElementById("lat_de").value = item.y;
							document.getElementById("lng_de").value = item.x;
							
							dx =  document.getElementById("lng").value;
							dy =  document.getElementById("lat").value;
							ax = item.x;
							ay = item.y;
							searchPubTransPathAJAX();

					/* 		infoWindow
									.setContent([
											'<div style="padding:10px;min-width:200px;line-height:150%;">',
											'<h4 style="margin-top:5px;">ê²€ìƒ‰ ì£¼ì†Œ : '
													+ arr + '</h4><br />',
											htmlAddresses.join('<br />'),
											'</div>' ].join('\n')); */

							map.setCenter(point);
							/* infoWindow.open(map, point); */
						});
	}

	function initGeocoder() {

		map.addListener('click', function(e) {
			searchCoordinateToAddress(e.coord);
		});

		$('#address').on('keydown', function(e) {
			var keyCode = e.which;

			if (keyCode === 13) { // Enter Key
				searchAddressToCoordinate($('#address').val());
			}
		});

		$('#submit').on('click', function(e) {
			e.preventDefault();

			searchAddressToCoordinate($('#address').val());
		});

		searchAddressToCoordinate();
	}

	naver.maps.onJSContentLoaded = initGeocoder;

	// ì§€ë„ì— ì„ í‘œì‹œ API

	var dx = 126.93737555322481;
	var dy = 37.55525165729346;
	var ax = 126.88265238619182;
	var ay = 37.481440035175375;

	//
	function searchPubTransPathAJAX() {
		var xhr = new XMLHttpRequest();
		//ODsay apiKey ì…ë ¥
		var url = "https://api.odsay.com/v1/api/searchPubTransPath?SX=" + dx
				+ "&SY=" + dy + "&EX=" + ax + "&EY=" + ay + "&apiKey=" + odsay;
		xhr.open("GET", url, true);
		xhr.send();
		xhr.onreadystatechange = function() {
			if (xhr.readyState == 4 && xhr.status == 200) {
				getRoute(JSON.parse(xhr.responseText)); // <- xhr.responseText ë¡œ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ
				
				//ë…¸ì„ ê·¸ë˜í”½ ë°ì´í„° í˜¸ì¶œ
				callMapObjApiAJAX((JSON.parse(xhr.responseText))["result"]["path"][0].info.mapObj);
			}
		}
	}

	//ê¸¸ì°¾ê¸° API í˜¸ì¶œ
	// searchPubTransPathAJAX();

	function callMapObjApiAJAX(mabObj) {
		var xhr = new XMLHttpRequest();
		//ODsay apiKey ì…ë ¥
		var url = "https://api.odsay.com/v1/api/loadLane?mapObject=0:0@"
				+ mabObj + "&apiKey=" + odsay;
		xhr.open("GET", url, true);
		xhr.send();
		xhr.onreadystatechange = function() {
			if (xhr.readyState == 4 && xhr.status == 200) {
				var resultJsonData = JSON.parse(xhr.responseText);
				drawNaverMarker(dx, dy, true); // ì¶œë°œì§€ ë§ˆì»¤ í‘œì‹œ
				drawNaverMarker(ax, ay, false); // ë„ì°©ì§€ ë§ˆì»¤ í‘œì‹œ
				drawNaverPolyLine(resultJsonData); // ë…¸ì„ ê·¸ë˜í”½ë°ì´í„° ì§€ë„ìœ„ í‘œì‹œ
				// boundary ë°ì´í„°ê°€ ìˆì„ê²½ìš°, í•´ë‹¹ boundaryë¡œ ì§€ë„ì´ë™
				if (resultJsonData.result.boundary) {
					var boundary = new naver.maps.LatLngBounds(
							new naver.maps.LatLng(
									resultJsonData.result.boundary.top,
									resultJsonData.result.boundary.left),
							new naver.maps.LatLng(
									resultJsonData.result.boundary.bottom,
									resultJsonData.result.boundary.right));
					map.panToBounds(boundary);
				}
			}
		}
	}
	
 	var marker = new naver.maps.Marker({
	    position: new naver.maps.LatLng(37.3595704, 127.105399),
	    map: map
	});

	// ì§€ë„ìœ„ ë§ˆì»¤ í‘œì‹œí•´ì£¼ëŠ” í•¨ìˆ˜
	function drawNaverMarker(x, y, result) {
		if(result){
			marker.setMap(null);
		}
		marker = new naver.maps.Marker({
			position : new naver.maps.LatLng(y, x),
			map : map
		});
	}

	// ë…¸ì„ ê·¸ë˜í”½ ë°ì´í„°ë¥¼ ì´ìš©í•˜ì—¬ ì§€ë„ìœ„ í´ë¦¬ë¼ì¸ ê·¸ë ¤ì£¼ëŠ” í•¨ìˆ˜
	function drawNaverPolyLine(data) {
		var lineArray;
		for (var i = 0; i < data.result.lane.length; i++) {
			for (var j = 0; j < data.result.lane[i].section.length; j++) {
				lineArray = null;
				lineArray = new Array();
				for (var k = 0; k < data.result.lane[i].section[j].graphPos.length; k++) {
					lineArray.push(new naver.maps.LatLng(
							data.result.lane[i].section[j].graphPos[k].y,
							data.result.lane[i].section[j].graphPos[k].x));
				}

				//ì§€í•˜ì² ê²°ê³¼ì˜ ê²½ìš° ë…¸ì„ ì— ë”°ë¥¸ ë¼ì¸ìƒ‰ìƒ ì§€ì •í•˜ëŠ” ë¶€ë¶„ (1,2í˜¸ì„ ì˜ ê²½ìš°ë§Œ ì˜ˆë¡œ ë“¤ìŒ)
				if (data.result.lane[i].type == 1) {
					var polyline = new naver.maps.Polyline({
						map : map,
						path : lineArray,
						strokeWeight : 3,
						strokeColor : '#003499'
					});
				} else if (data.result.lane[i].type == 2) {
					var polyline = new naver.maps.Polyline({
						map : map,
						path : lineArray,
						strokeWeight : 3,
						strokeColor : '#37b42d'
					});
				} else {
					var polyline = new naver.maps.Polyline({
						map : map,
						path : lineArray,
						strokeWeight : 3
					});
				}
			}
		}
	}
	
	function getOutRoute(result){
		document.getElementById('result-route').innerHTML = "";
		if(result.count === 0){
			return;
		}else{
			for(let i = 0; i < result.OBJ.length; i ++){
				var payment = result.OBJ[i].payment;
				var totalTime = result.OBJ[i].time;
				var totalDistance = result.OBJ[i].distance;
				var subPath = result.OBJ[i].subPath;
				var endSTN = result.OBJ[i].endSTN
				var startSTN = result.OBJ[i].startSTN
				if(i % 2 == 0){
					var new_html = '<div id="r' + i + '" onclick="view_all(event)" class="btn btn-primary btn-xl" style="width: 800px; height: 30px; opacity:0.8; margin:15px; text-align: center; line-height: 0px; white-space: nowrap;overflow:hidden;text-overflow:ellipsis;">'
				}else{
					var new_html = '<div id="r' + i + '" onclick="view_all(event)" class="btn btn-primary btn-xl" style="width: 800px; height: 30px; opacity:0.6; margin:15px; text-align: center; line-height: 0px; white-space: nowrap;overflow:hidden;text-overflow:ellipsis;">'
				}
				
				new_html += startSTN + " -> " + endSTN;
				new_html += '   (ì´ ìš”ê¸ˆ : ' + payment + 'ì› / ì´ ì‹œê°„ : ' + totalTime + 'ë¶„)'
				document.getElementById('result-route').innerHTML += new_html;
			}
		}
	}
	
	function getRoute(result){
		console.log(result);
		document.getElementById('result-route').innerHTML = "";
		if(typeof result["result"]["path"] === 'undefined'){
			getOutRoute(result["result"].airRequest);
			getOutRoute(result["result"].exBusRequest);
			getOutRoute(result["result"].outBusRequest);
			getOutRoute(result["result"].trainRequest);
		}else{
			for(let i = 0; i < result["result"]["path"].length; i ++){
				console.log(result["result"]["path"][i]);
				var payment = result["result"]["path"][i].info.payment;
				var totalTime = result["result"]["path"][i].info.totalTime;
				var totalDistance = result["result"]["path"][i].info.totalDistance;
				var subPath = result["result"]["path"][i].subPath;
				var trans = "";
				var distance = "";
				if(i % 2 == 0){
					var new_html = '<div id="r' + i + '" onclick="view_all(event)" class="btn btn-primary btn-xl" style="width: 800px; height: 30px; opacity:0.8; margin:15px; text-align: center; line-height: 0px; white-space: nowrap;overflow:hidden;text-overflow:ellipsis;">'
				}else{
					var new_html = '<div id="r' + i + '" onclick="view_all(event)" class="btn btn-primary btn-xl" style="width: 800px; height: 30px; opacity:0.6; margin:15px; text-align: center; line-height: 0px; white-space: nowrap;overflow:hidden;text-overflow:ellipsis;">'
				}
				
				for(let j = 0; j < subPath.length; j ++){
					console.log(subPath[j]);
					if(typeof subPath[j].lane === 'undefined'){
						trans = "ë„ë³´";
						distance = subPath[j].distance;
					}else{
						console.log(subPath[j].lane[0]);
						if(typeof subPath[j].lane[0].busNo === 'undefined'){
							trans = subPath[j].lane[0].name;
							distance = subPath[j].distance;
						}else{
							trans = subPath[j].lane[0].busNo;
							distance = subPath[j].distance;
						}
					}
					if(j != subPath.length -1){
						new_html += trans + '(' + distance + "m) ->"
					}else{
						new_html += trans + '(' + distance + "m)"
					}
				}
				new_html += '   (ì´ ìš”ê¸ˆ : ' + payment + 'ì› / ì´ ì‹œê°„ : ' + totalTime + 'ë¶„)'
				document.getElementById('result-route').innerHTML += new_html;
			}
		}
	}
	
	/* writerê°€ ë§ëŠ”ì§€ ì²´í¬*/
	isWriter();
	function isWriter(){
		axios.post('/meetmeet/iswriter', null, {params:{
			master_id: master_id
		}
		})
		.then(function (response) {	// ì •ìƒ ì‘ë‹µì‹œì— ìë™ í˜¸ì¶œ
			if(response.data){
				isWriterTrue();
			}else{
				check_meetparticipate();
			};
		})
			.catch(function (error) {	// ì‘ë‹µì—ëŸ¬ ë°œìƒì‹œ ìë™ í˜¸ì¶œ
			console.log(error);
		});
	}
	
	function isWriterTrue(){
		document.getElementById("button-delete").style.display = "block";
		document.getElementById("button-modify").style.display = "block";
	}
	
	function isWriterTrueParticipateFalse(){
		document.getElementById("button-participate").style.display = "block";
		document.getElementById("button-participate-cancel").style.display = "none";
	}
	
	function isWriterTrueParticipateTrue(){
		document.getElementById("button-participate").style.display = "none";
		document.getElementById("button-participate-cancel").style.display = "block";
	}
	
	/* meeting ì°¸ê°€í•˜ê¸° */
	 function meetparticipate(){
		axios.post('/meetparticipate', null, {params:{
			meetingId: meeting_id
		}
		})
		.then(function (response) {	
		 	if(response.data){
				isWriterTrue();
			}else{
				check_meetparticipate();
			};
		})
			.catch(function (error) {	
			console.log(error);
		});
	}
	
	 /* meeting ì·¨ì†Œí•˜ê¸° */
		function meetparticipatecancel(){
			axios.post('/cancel/meetparticipate', null, {params:{
				meetingId: meeting_id
			}
			})
			.then(function (response) {	
				console.log(response);
			 	if(response.data){
			 		isWriterTrueParticipateFalse();
				}
			})
				.catch(function (error) {	
				console.log(error);
			});
		}
	
	/* meeting ì°¸ê°€ì¤‘ì¸ì§€ ì—¬ë¶€*/
	
	function check_meetparticipate(){
		axios.post('/check/meetparticipate', null, {params:{
			meetingId: meeting_id
		}
		})
		.then(function (response) {
		 	if(response.data){
		 		isWriterTrueParticipateTrue();
			}else{
				isWriterTrueParticipateFalse();
			}
		 	// setTimeout(check_meetparticipate,2000);
		})
			.catch(function (error) {
			console.log(error);
		});
	}
	
	/* í˜„ì¬ ìœ ì €ì˜ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸° */
	
	/*<![CDATA[*/
	 let session_accountId = /*[[ ${session.accountId} ]]*/;
	 /*]]*/
	
	if(session_accountId != null){
		get_direct_user();
	}
	
	function get_direct_user(){
		axios.post('/place/getone', null, {params:{
			id: session_accountId
		}
		})
		.then(function (response) {
			mark_direct_user(response.data);
		})
			.catch(function (error) {
			console.log(error);
		});
	}
	
	function mark_direct_user(res){		
		searchCoordinateToAddress({
			y : res.lng,
			_lat : lat,
			x : res.lat,
			_lng : lng
		})
		
	}
	
	includeHTML();
	function includeHTML() {
		var z, i, elmnt, file, xhttp;
		/* Loop through a collection of all HTML elements: */
		z = document.getElementsByTagName("*");
		for (i = 0; i < z.length; i++) {
			elmnt = z[i];
			/*search for elements with a certain atrribute:*/
			file = elmnt.getAttribute("w3-include-html");
			if (file) {
				/* Make an HTTP request using the attribute value as the file name: */
				xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4) {
						if (this.status == 200) {
							elmnt.innerHTML = this.responseText;
						}
						if (this.status == 404) {
							elmnt.innerHTML = "Page not found.";
						}
						/* Remove the attribute, and call this function once more: */
						elmnt.removeAttribute("w3-include-html");
						includeHTML();
					}
				}
				xhttp.open("GET", file, true);
				xhttp.send();
				/* Exit the function: */
				return;
			}
		}
	}
	
	function view_all(e){
		document.getElementById(e.target.id).style = "width: 800px; opacity:" + document.getElementById(e.target.id).style.opacity + "; margin:15px; text-align: center; overflow:hidden; height:auto";
	}
	
	
	
	
</script>
</html>